<!DOCTYPE html>
<html>

    <head>
        <title>Statistics</title>
        <link rel="stylesheet" href="SpaceStyleSheet.css">
    </head>
    
    <body>
        <div id="statsWrapper">
            <h1>Statistics</h1>
            <table>
              <tr>
                <th>Name</th>
                <td><span id="name"></span></td>
              </tr>
              <tr>
                <th>Mission Status</th>
                <td><span id="status">STATUS PENDING</span></td>
              </tr>
              <tr>
                <th>Spinglespop name</th>
                <td><span id="spinglespop"></span></td>
              </tr>
              <tr>
                <th>Time Remaining</th>
                <td><span id="timerText">?</span> seconds</td>
              </tr>
            </table>
            <button onclick="Restart();" class="button">Play again</button>
        </div>

        <script type="text/javascript">
          // Name from home page
          var name = sessionStorage.getItem('name');

          // Display the user's name
          document.getElementById('name').innerHTML = name;
          const missionStatus = sessionStorage.getItem("missionStatus");
          const statusElement = document.getElementById("status");
          if (missionStatus === "SUCCESS") {
            statusElement.innerHTML = "SUCCESS";
          } else {
            statusElement.innerHTML = "FAILED";
          }

          var spinglespop = sessionStorage.getItem('petName');
          var spinglesname = document.getElementById('spinglespop');
          if (spinglespop === null) {
            spinglesname.innerHTML = "Not found"
          } else {
            spinglesname.innerHTML = spinglespop;
          }

          // Load the remaining time from the session storage and display it in the "Time Remained" table cell
          const timeRemElement = document.getElementById("timerText");
          const timeRem = sessionStorage.getItem("timeRem");
          if (timeRem === null) {
            timeRemElement.innerHTML = "?";
          } else if (timeRem === "END") {
            timeRemElement.innerHTML = "0";
          } else {
            timeRemElement.innerHTML = timeRem;
          }

          function Restart() {
            sessionStorage.removeItem("name");
            sessionStorage.removeItem("door1");
            sessionStorage.removeItem("torch");
            sessionStorage.removeItem("shipdeck");
            sessionStorage.removeItem("WireCoil");
            sessionStorage.removeItem("NewCode");
            sessionStorage.removeItem("crowbarSS");
            sessionStorage.removeItem("leverSS");
            sessionStorage.removeItem("gameSS");
            sessionStorage.removeItem("extinguisher");
            sessionStorage.removeItem("fireOut");
            sessionStorage.removeItem("FireChecker");
            sessionStorage.removeItem("timeRem");
            sessionStorage.removeItem("petName");
            window.location.replace("HomePage.html");
          }
          
          window.onload = function() {
            var fontSize = sessionStorage.getItem("fontSize");
            if (fontSize) {
                document.body.style.fontSize = fontSize;
            }
        }
        </script>
    </body>

</html>