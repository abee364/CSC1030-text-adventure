<html>

<head>
    <title>Control Room</title>

    <link rel="stylesheet" href="SpaceStyleSheet.css">

</head>

<body>
    <div id="wrapper">
        <!-- Column 1 - Where the photo is  -->
        <div id="col1">
            <h1>Control Room</h1>

            <!-- The main photo  -->
            <div id="main" class="showMe">
                <img class="centre" src="images/room6_gasandfire.png" style="width:90%;" alt="Control Room" />
            </div>

            <div id="gas" class="hideMe">
                <img class="centre" src="images/room6_gas.png" style="width:90%;" alt="Control Room" />
            </div>

            <div id="normal" class="hideMe">
                <img class="centre" src="images/room6_gas.png" style="width:90%;" alt="Control Room" />
            </div>

            <!--Screen close-up-->
            <div id="screen" class="hideMe">
                <img class="centre" src="images/locked_screen.png" style="width:90%;" alt="Control Room" />
            </div>

            <div id="unlocked_screen" class="hideMe">
                <img class="centre" src="images/unlocked_screen.png" style="width:90%;" alt="Control Room" />
            </div>

            <!-- Different endings -->
            <div id="saveShip" class="hideMe">
                <img class="centre" src="images/escape endcard.jpg" style="width:90%;" alt="Escape Endcard" />
            </div>

            <div id="runOutOfTime" class="hideMe">
                <img class="centre" src="images/escape endcard.jpg" style="width:90%;" alt="Escape Endcard" />
            </div>
        </div>

        <!-- column 2 - where the buttons go -->
        <div id="col2" class="showMe">

            <h1>Control Room</h1>

            <h1>Time Remaining: <span id="timerText">?</span></h1>

            <div id="RoomButtons">
                <button id="previousRoom" onclick="previousRoom()" class="button">Previous Room</button>
            </div>

            <div id="Room6Buttons">

                <p>“You have reached the source of the gas leak! You must hurry to find a way to stop it before you run
                    out of oxygen and the fire spreads further.”
                </p>
                <br>

                <button id="screenbutton" onclick="screen()" class="button">Check out screen</button>
                <button id="fire" onclick="fire()" class="button">Put out fire</button>
                <button id="riddle" onclick="riddle()" class="hideMe">Answer riddle</button>
                <button id="back" onclick="back()" class="hideMe">Back</button>

            </div>
        </div>
    </div>


    <script>
        
        let extingusher = 0;

        function screen() {
            /*Screen with way to turn on?*/
            document.getElementById('main').className = "hideMe";
            document.getElementById('screen').className = "showMe";
            document.getElementById('screenbutton').className = "hideMe";
            document.getElementById('fire').className = "hideMe";
            document.getElementById('riddle').className = "showMe";
            document.getElementById('riddle').className = "button";
            document.getElementById('back').className = "showMe";
            document.getElementById('back').className = "button";

        }

        function fire() {
            if (extingusher == 1) {
                window.alert("Fire has been succesfully put out");
                /*Remove fire from graphic*/

            } else {
                window.alert("You do not have anything to put the fire out with");
            }
        }


        function back() {
            document.getElementById('main').className = "showMe";
            document.getElementById('screen').className = "hideMe";
            document.getElementById('screenbutton').className = "showMe button";
            document.getElementById('fire').className = "showMe button";
            document.getElementById('riddle').className = "hideMe";
            document.getElementById('back').className = "hideMe";            

        }

        function previousRoom() {

            window.location.replace("4Gallery.html")
        }

        //Session scripts
        // Initial timer (default vaulue is 1000 seconds)
        if (!sessionStorage.getItem('timeRem')) {
            sessionStorage.setItem('timeRem', '1000');
        }

        // Timer with the remaining time
        function startTimer() {
            var timeRem = sessionStorage.getItem('timeRem');
            document.getElementById('timerText').innerHTML = timeRem;
            timer = setInterval(countdown, 1000);
        }

        // Save the remaining time in the session storage before navigating to another page
        function saveTimeRem() {
            var timeRem = document.getElementById('timerText').innerHTML;
            sessionStorage.setItem('timeRem', timeRem);
        }

        // Load the remaining time from the session storage and start the timer with it
        function loadTimeRem() {
            var timeRem = sessionStorage.getItem('timeRem');
            document.getElementById('timerText').innerHTML = timeRem;
            timer = setInterval(countdown, 1000);
        }

        // Update the timer display and store the remaining time in the session storage every second
        function countdown() {
            var timeRem = document.getElementById('timerText').innerHTML;
            if (timeRem > 0) {
                timeRem--;
                document.getElementById('timerText').innerHTML = timeRem;
                sessionStorage.setItem('timeRem', timeRem);
            } else {
                clearInterval(timer);
                document.getElementById('timerText').innerHTML = 'END';
                timeRem = 10;
                // Redirect to statistics page
                window.location.href = 'stats.html';
            }
        }

        // Register a beforeunload event listener to save the remaining time before navigating away from the page
        window.addEventListener('beforeunload', saveTimeRem);

        // Load the remaining time and start the timer when the page loads
        window.addEventListener('load', loadTimeRem);

    </script>
</body>

</html>